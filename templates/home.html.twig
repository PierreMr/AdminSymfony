{% extends 'base.html.twig' %}

{% block title %}AdminSymfony | Home{% endblock %}

{% block body %}
	<h1>Home</h1>

	<div class="container-fluid">
		<div class="row">
			<div class="col-6">
				<div class="block">
					<div class="block-title row">
						<div class="col-10">
							<h2>Chart 1</h2>
						</div>
						<div class="col-2">
							<span class="toggle"> - </span>
						</div>
					</div> <!-- Block Title -->

					<div class="block-body">
						<canvas id=chartBar></canvas>
					</div> <!-- Block Body -->

					<div class="block-footer">
						<p>Block Footer</p>
					</div> <!-- Block Footer -->
				</div> <!-- Block -->
			</div> <!-- Col Block -->

			<script type="text/javascript">
				var ctxBar = document.getElementById("chartBar").getContext('2d');
				var myChartBar = new Chart(ctxBar, {
				    type: 'bar',
				    data: {
				        labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
				        datasets: [{
				            label: '# of Votes',
				            data: function () {
							    var tmp = null;
							    $.ajax({
							        'async': false,
							        'type': "POST",
							        'global': false,
							        'dataType': 'json',
							        'url': "/get-nb-res",
							        'data': { 'request': "", 'target': 'arrange_url', 'method': 'method_target' },
							        'success': function (data) {
							            tmp = data;
							        }
							    });
							    return tmp;
						    }(),
				            backgroundColor: [
				                'rgba(255, 99, 132, 0.2)',
				                'rgba(54, 162, 235, 0.2)',
				                'rgba(255, 206, 86, 0.2)',
				                'rgba(75, 192, 192, 0.2)',
				                'rgba(153, 102, 255, 0.2)',
				                'rgba(255, 159, 64, 0.2)'
				            ],
				            borderColor: [
				                'rgba(255,99,132,1)',
				                'rgba(54, 162, 235, 1)',
				                'rgba(255, 206, 86, 1)',
				                'rgba(75, 192, 192, 1)',
				                'rgba(153, 102, 255, 1)',
				                'rgba(255, 159, 64, 1)'
				            ],
				            borderWidth: 1
				        }]
				    },
				    options: {
				        scales: {
				            yAxes: [{
				                ticks: {
				                    beginAtZero:true
				                }
				            }]
				        }
				    }
				});
			</script>

			<div class="col-6">
				<div class="block">
					<div class="block-title row">
						<div class="col-10">
							<h2>Chart 2</h2>
						</div>
						<div class="col-2">
							<span class="toggle"> - </span>
						</div>
					</div> <!-- Block Title -->

					<div class="block-body">
						<div class="row mb-3">
							<div class="text-left col-6">
								<button class="btn btn-primary active" onclick="lastWeek(myChartLine, days(dateLastWeek), datas())"> Week </button>
								<button class="btn btn-primary" onclick="nextWeek(myChartLine, days(dateNextWeek), datas())"> Month </button>
								<button class="btn btn-primary" onclick="nextWeek(myChartLine, days(dateNextWeek), datas())"> Year </button>
							</div>
							<div class="text-right col-6">
								<button class="btn btn-primary" onclick="lastWeek(myChartLine, days(dateLastWeek), datas())"> < </button>
								<button class="btn btn-primary" onclick="nextWeek(myChartLine, days(dateNextWeek), datas())"> > </button>
							</div>
						</div>
						<canvas id=chartLine></canvas>
					</div> <!-- Block Body -->

					<div class="block-footer">
						<p>Block Footer</p>
					</div> <!-- Block Footer -->
				</div> <!-- Block -->
			</div> <!-- Col Block -->

			<script type="text/javascript">
				function dateFormatAAAAMMJJ(date) {
					return date.getFullYear()+"-"+(date.getMonth()+1)+"-"+date.getDate();
				}
				function getNextWeek(day) {
				  var nextWeek = new Date(day.getFullYear(), day.getMonth(), day.getDate() + 7);
				  return nextWeek;
				}
				function getLastWeek(day) {
				  var lastWeek = new Date(day.getFullYear(), day.getMonth(), day.getDate() - 7);
				  return lastWeek;
				}

				var date = new Date();
				var dateString = dateFormatAAAAMMJJ(date);
				var dateNextWeek = dateFormatAAAAMMJJ(getNextWeek(date));
				var dateLastWeek = dateFormatAAAAMMJJ(getLastWeek(date));
			</script>

			<script type="text/javascript">
			    function days(day) {
			    	console.log(day);
					var days = function () {
					    var tmp = null;
					    $.ajax({
					        'async': false,
					        'type': "POST",
					        'global': false,
					        'dataType': 'json',
					        'url': "/get-days/"+day,
					        'data': { 'request': "", 'target': 'arrange_url', 'method': 'method_target' },
					        'success': function (data) {
					            tmp = data;
					        }
					    });
					    return tmp;
					}();
					return days;
			    }
			    function datas() {
			    	var datas = function () {
				    var tmp = null;
					    $.ajax({
					        'async': false,
					        'type': "POST",
					        'global': false,
					        'dataType': 'json',
					        'url': "/get-nb-res",
					        'data': { 'request': "", 'target': 'arrange_url', 'method': 'method_target' },
					        'success': function (data) {
					            tmp = data;
					        }
					    });
					    return tmp;
				    }();
					return datas;
			    }

				var ctxLine = document.getElementById("chartLine").getContext('2d');
				var myChartLine = new Chart(ctxLine, {
				    type: 'line',
				    data: {
				        labels: days(dateString),
				        datasets: [{
				            label: '# of Reservations',
				            data: datas(),
				            backgroundColor: [
				                'rgba(255, 99, 132, 0.2)',
				                'rgba(54, 162, 235, 0.2)',
				                'rgba(255, 206, 86, 0.2)',
				                'rgba(75, 192, 192, 0.2)',
				                'rgba(153, 102, 255, 0.2)',
				                'rgba(255, 159, 64, 0.2)'
				            ],
				            borderColor: [
				                'rgba(255,99,132,1)',
				                'rgba(54, 162, 235, 1)',
				                'rgba(255, 206, 86, 1)',
				                'rgba(75, 192, 192, 1)',
				                'rgba(153, 102, 255, 1)',
				                'rgba(255, 159, 64, 1)'
				            ],
				            borderWidth: 1
				        }]
				    },
				    options: {
				        scales: {
				            yAxes: [{
				                ticks: {
				                    beginAtZero:true
				                }
				            }]
				        }
				    }
				});

				function addLabel(chart, label) {
				    chart.data.labels.push(label);
				    chart.update();
				}

				function addDatas(chart, labels, datas) {
					chart.data.labels = [];
				    labels.forEach((label) => { addLabel(chart, label); });

					chart.data.datasets = [];
					chart.data.datasets.push({
			            label: '# of Reservations',
			            data: datas,
			            backgroundColor: [
			                'rgba(255, 99, 132, 0.2)',
			                'rgba(54, 162, 235, 0.2)',
			                'rgba(255, 206, 86, 0.2)',
			                'rgba(75, 192, 192, 0.2)',
			                'rgba(153, 102, 255, 0.2)',
			                'rgba(255, 159, 64, 0.2)'
			            ],
			            borderColor: [
			                'rgba(255,99,132,1)',
			                'rgba(54, 162, 235, 1)',
			                'rgba(255, 206, 86, 1)',
			                'rgba(75, 192, 192, 1)',
			                'rgba(153, 102, 255, 1)',
			                'rgba(255, 159, 64, 1)'
			            ],
			            borderWidth: 1
			        });
				    chart.update();
				}

				function nextWeek(chart, labels, datas) {
					addDatas(chart, labels, datas);

					dateNextWeek = dateFormatAAAAMMJJ(getNextWeek(new Date(dateNextWeek)));
					dateLastWeek = dateFormatAAAAMMJJ(getNextWeek(new Date(dateLastWeek)));
				}

				function lastWeek(chart, labels, datas) {
					addDatas(chart, labels, datas);

					dateNextWeek = dateFormatAAAAMMJJ(getLastWeek(new Date(dateNextWeek)));
					dateLastWeek = dateFormatAAAAMMJJ(getLastWeek(new Date(dateLastWeek)));
				}
			</script>

			<div class="col-6">
				<div class="block">
					<div class="block-title row">
						<div class="col-10">
							<h2>Block Title 1</h2>
						</div>
						<div class="col-2">
							<span class="toggle"> - </span>
						</div>
					</div> <!-- Block Title -->

					<div class="block-body">
						<p><span class="dropcap">N</span>am ullamcorper vulputate tempor. Mauris fringilla dignissim lacus ac consequat. Pellentesque ac semper nunc, vitae tincidunt nibh. Phasellus convallis, velit in bibendum accumsan, lacus erat malesuada enim, lacinia convallis metus magna ac libero. Fusce sed accumsan nulla. Nullam vel neque nec elit posuere varius. Donec fringilla lectus eget vestibulum aliquam.</p>

						<p>Donec eu turpis eu neque finibus molestie. In at diam at nulla rutrum pharetra. Quisque eget nisi vel lectus fringilla porta sed in dui. Cras blandit vel lectus id pretium. Quisque iaculis velit non ex rhoncus imperdiet. Suspendisse dignissim neque felis, at pellentesque nisl vehicula aliquam. Nunc ut lectus vel lorem malesuada fringilla. Mauris sed massa magna.</p>
					</div> <!-- Block Body -->

					<div class="block-footer">
						<p>Block Footer</p>
					</div> <!-- Block Footer -->
				</div> <!-- Block -->
			</div> <!-- Col Block -->

			<div class="col-6">
				<div class="block">
					<div class="block-title row">
						<div class="col-10">
							<h2>Block Title 2</h2>
						</div>
						<div class="col-2">
							<span class="toggle"> - </span>
						</div>
					</div> <!-- Block Title -->

					<div class="block-body">
						<p><span class="dropcap">N</span>am ullamcorper vulputate tempor. Mauris fringilla dignissim lacus ac consequat. Pellentesque ac semper nunc, vitae tincidunt nibh. Phasellus convallis, velit in bibendum accumsan, lacus erat malesuada enim, lacinia convallis metus magna ac libero. Fusce sed accumsan nulla. Nullam vel neque nec elit posuere varius. Donec fringilla lectus eget vestibulum aliquam.</p>

						<p>Donec eu turpis eu neque finibus molestie. In at diam at nulla rutrum pharetra. Quisque eget nisi vel lectus fringilla porta sed in dui. Cras blandit vel lectus id pretium. Quisque iaculis velit non ex rhoncus imperdiet. Suspendisse dignissim neque felis, at pellentesque nisl vehicula aliquam. Nunc ut lectus vel lorem malesuada fringilla. Mauris sed massa magna.</p>
					</div> <!-- Block Body -->

					<div class="block-footer">
						<p>Block Footer</p>
					</div> <!-- Block Footer -->
				</div> <!-- Block -->
			</div> <!-- Col Block -->

			<div class="col-4">
				<div class="block">
					<div class="block-title row">
						<div class="col-10">
							<h2>Block Title 3</h2>
						</div>
						<div class="col-2">
							<span class="toggle"> - </span>
						</div>
					</div> <!-- Block Title -->

					<div class="block-body">
						<p><span class="dropcap">N</span>am ullamcorper vulputate tempor. Mauris fringilla dignissim lacus ac consequat. Pellentesque ac semper nunc, vitae tincidunt nibh. Phasellus convallis, velit in bibendum accumsan, lacus erat malesuada enim, lacinia convallis metus magna ac libero. Fusce sed accumsan nulla. Nullam vel neque nec elit posuere varius. Donec fringilla lectus eget vestibulum aliquam.</p>
					</div> <!-- Block Body -->

					<div class="block-footer">
						<p>Block Footer</p>
					</div> <!-- Block Footer -->
				</div> <!-- Block -->
			</div> <!-- Col Block -->

			<div class="col-4">
				<div class="block">
					<div class="block-title row">
						<div class="col-10">
							<h2>Block Title 4</h2>
						</div>
						<div class="col-2">
							<span class="toggle"> - </span>
						</div>
					</div> <!-- Block Title -->

					<div class="block-body">
						<p><span class="dropcap">N</span>am ullamcorper vulputate tempor. Mauris fringilla dignissim lacus ac consequat. Pellentesque ac semper nunc, vitae tincidunt nibh. Phasellus convallis, velit in bibendum accumsan, lacus erat malesuada enim, lacinia convallis metus magna ac libero. Fusce sed accumsan nulla. Nullam vel neque nec elit posuere varius. Donec fringilla lectus eget vestibulum aliquam.</p>
					</div> <!-- Block Body -->

					<div class="block-footer">
						<p></p>
					</div> <!-- Block Footer -->
				</div> <!-- Block -->
			</div> <!-- Col Block -->

			<div class="col-4">
				<div class="block">
					<div class="block-title row">
						<div class="col-10">
							<h2>Block Title 5</h2>
						</div>
						<div class="col-2">
							<span class="toggle"> - </span>
						</div>
					</div> <!-- Block Title -->

					<div class="block-body">
						<p><span class="dropcap">N</span>am ullamcorper vulputate tempor. Mauris fringilla dignissim lacus ac consequat. Pellentesque ac semper nunc, vitae tincidunt nibh. Phasellus convallis, velit in bibendum accumsan, lacus erat malesuada enim, lacinia convallis metus magna ac libero. Fusce sed accumsan nulla. Nullam vel neque nec elit posuere varius. Donec fringilla lectus eget vestibulum aliquam.</p>
					</div> <!-- Block Body -->

					<div class="block-footer">
						<p>Block Footer</p>
					</div> <!-- Block Footer -->
				</div> <!-- Block -->
			</div> <!-- Col Block -->
		</div>
	</div>
{% endblock %}